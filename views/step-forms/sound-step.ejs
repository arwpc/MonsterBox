<form id="soundStepForm" onsubmit="event.preventDefault(); saveStep(new FormData(this));">
    <input type="hidden" name="type" value="sound">
    <input type="hidden" name="stepIndex" value="<%= stepIndex %>">
    
    <div>
        <label for="sound_id">Sound:</label>
        <select name="sound_id" required>
            <% sounds.forEach(function(sound) { %>
                <option value="<%= sound.id %>"><%= sound.name %></option>
            <% }); %>
        </select>
    </div>
    
    <div>
        <label for="concurrent">Concurrent:</label>
        <input type="checkbox" name="concurrent">
    </div>
    
    <div>
        <label for="description">Description:</label>
        <input type="text" name="description" required>
    </div>
    
    <button type="submit">Save Step</button>
    <button type="button" onclick="$('#stepFormContainer').hide();">Cancel</button>
</form>

<button type="button" onclick="testSound()">Test Sound</button>

<script>
    function testSound() {
        const formData = new FormData(document.getElementById('soundStepForm'));
        $.post('/sounds/test', formData)
            .done(function(response) {
                alert('Sound test successful');
            })
            .fail(function(xhr, status, error) {
                alert('Error testing sound: ' + error);
            });
    }
</script>
