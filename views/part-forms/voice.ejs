<div class="step" data-index="<%= index %>" data-type="voice">
    <h3>Step <%= index + 1 %>: Voice</h3>
    <input type="hidden" name="steps[<%= index %>][type]" value="voice">
    <input type="hidden" name="steps[<%= index %>][sound_id]" value="">
    
    <div class="form-group">
        <label for="steps[<%= index %>][name]">Scene Name:</label>
        <input type="text" name="steps[<%= index %>][name]" value="Voice Step" required>
    </div>

    <div class="form-group">
        <label for="steps[<%= index %>][text]">Words to Speak:</label>
        <div class="voice-input-group">
            <textarea name="steps[<%= index %>][text]" rows="3" required></textarea>
            <div class="voice-controls">
                <button type="button" class="preview-voice button" data-index="<%= index %>">Generate</button>
                <button type="button" class="play-voice button" data-index="<%= index %>" style="display: none;">Play</button>
                <audio id="voice-audio-<%= index %>" style="display: none;"></audio>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div id="voice-preview-status-<%= index %>" class="preview-status"></div>
    </div>

    <div class="button-group">
        <button type="button" class="remove-step button" data-index="<%= index %>">Remove Step</button>
        <button type="button" class="copy-step button" data-index="<%= index %>">Copy Step</button>
    </div>
</div>

<style>
.voice-input-group {
    display: flex;
    gap: 10px;
    align-items: flex-start;
}

.voice-input-group textarea {
    flex: 1;
}

.voice-controls {
    display: flex;
    flex-direction: column;
    gap: 5px;
}
</style>
