<form id="motorStepForm" onsubmit="event.preventDefault(); saveStep(new FormData(this));">
    <input type="hidden" name="type" value="motor">
    <input type="hidden" name="stepIndex" value="<%= stepIndex %>">
    
    <div>
        <label for="part_id">Motor:</label>
        <select name="part_id" required>
            <% motorParts.forEach(function(part) { %>
                <option value="<%= part.id %>"><%= part.name %></option>
            <% }); %>
        </select>
    </div>
    
    <div>
        <label for="direction">Direction:</label>
        <select name="direction" required>
            <option value="forward">Forward</option>
            <option value="backward">Backward</option>
        </select>
    </div>
    
    <div>
        <label for="speed">Speed (0-100):</label>
        <input type="number" name="speed" min="0" max="100" required>
    </div>
    
    <div>
        <label for="duration">Duration (ms):</label>
        <input type="number" name="duration" min="0" required>
    </div>
    
    <div>
        <label for="concurrent">Concurrent:</label>
        <input type="checkbox" name="concurrent">
    </div>
    
    <div>
        <label for="description">Description:</label>
        <input type="text" name="description" required>
    </div>
    
    <button type="submit">Save Step</button>
    <button type="button" onclick="$('#stepFormContainer').hide();">Cancel</button>
</form>

<button type="button" onclick="testMotor()">Test Motor</button>

<script>
    function testMotor() {
        const formData = new FormData(document.getElementById('motorStepForm'));
        $.post('/parts/test-motor', formData)
            .done(function(response) {
                alert('Motor test successful');
            })
            .fail(function(xhr, status, error) {
                alert('Error testing motor: ' + error);
            });
    }
</script>
